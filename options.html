<!DOCTYPE html>
<html>
<head>
<title>Social Media Monitoring Extension Options</title>
<link rel="shortcut icon" HREF="img/icon_16.png"> 
<link rel="stylesheet" type="text/css" href="css/options.css">
<script type="text/javascript" src="jquery-1.4.2.min.js"></script>

<script type="text/javascript"> 
var bkg = chrome.extension.getBackgroundPage();

//Saves options to localStorage.
function save_options() {
	bkg.settings.pollInterval = parseInt($('#refresh').val()) * 60000;
	bkg.settings.timeout = 1000 * 15;
	refresh_extension();

	$('#save_status').fadeIn('fast');
	$('#save_status').fadeOut(3000);
}

//Refresh the extension by reseting timer.
function refresh_extension() {
	bkg.refresh(); 
}
/*
 * TODO: populate options interface 
 */
 
 
</script>
        
</head>
<body onload="_initOptionsPage();">
    <div id="content">
      <h1>
        <img src="img/logo_smmonitoring.png" title="SM Monitoring" alt="Social Media Monitoring"></h1>
	  <div class="section-header first">Options</div>
	  
      <form name="options_form" action="">
        <div class="option_row">
          <div class="option_name">Default On Click Behavior:</div>
          <div class="option_picker">
        <input type="radio" id="default" name="default" value="1"/><label for="default">Always show popup</label><br/>
        <input type="radio" id="off" name="off" value="0"/><label for="off">Never show popup (Go straight to browser tabs when new search result(s) exist)</label>
          </div>
        </div>	  
			  
        <div class="option_row">
          <div class="option_name">Update every:</div>
          <div class="option_picker">
            <select id="refresh-interval" name="refresh" onchange="markDirty()">
              <option value="5">5 minutes</option>
              <option value="10">10 minutes</option>
              <option value="15">15 minutes</option>
              <option value="30">30 minutes</option>
            </select>
          </div>
        </div>
		
		<div class="option_row">
          <div class="option_name">Sound alert:</div>
          <div class="option_picker">
            <select id="sound-alert">
              <option value="">None</option>
              <option value="http://work.max99x.com/cuckoo.ogg">Cuckoo</option>
              <option value="http://work.max99x.com/bell.ogg">Chime</option>
              <option value="http://work.max99x.com/cuckoo.ogg">Cuckoo</option>
            </select>
          </div>
		  <input type="button" value="Play" />
        </div>

        <div class="buttons">
          <button id="save_button" onclick="saveOptions();">Save</button>
		  <!-- TODO: implemet Reset -->
          <button id="reset_button" onclick="resetOptions();">Reset</button>
          <span id="save_status">Options saved</span>
        </div>
      </form>	  
    </div>
	
<!-- TODO: add extension link -->	
<div class="footer"><a href="http://*/*">Social Media Monitoring Homepage</a></div>

<script>
	//var customDomainsTextbox;
	var saveButton;

	
	function _initOptionsPage() {
		//customDomainsTextbox = document.getElementById("custom-domain");
		saveButton = document.getElementById("save_button");
		

		//customDomainsTextbox.value = localStorage.customDomain || "";
			
		markClean();

		debugInfo();
	}

	function debugInfo(){

		debugDivObj = document.getElementById("debug");

		//debugDivObj.innerHTML = localStorage.probes;
		

	}

	function saveOptions() {
		//localStorage.customDomain = customDomainsTextbox.value;
			
		markClean();

		chrome.extension.getBackgroundPage().init();
		return false;
	}
	
	function resetOptions() {
		
		return false;
	}
	
	

	function markDirty() {
		saveButton.disabled = false;
	}

	function markClean() {
		saveButton.disabled = true;
	}
</script>
</body>
</html>